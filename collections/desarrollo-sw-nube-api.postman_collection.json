{
	"info": {
		"_postman_id": "5a0ecb55-875e-4167-b3b8-2b46e44b312b",
		"name": "Desarrollo SW Nube API",
		"description": "# API de Competencia de Habilidades de Jugadores\n\n## Descripci√≥n\n\nAPI REST completa desarrollada con **FastAPI** para una plataforma de competencia de habilidades, incluyendo autenticaci√≥n, gesti√≥n de videos y sistema de rankings.\n\n### üéÜ Caracter√≠sticas Principales\n\n- üîê **Autenticaci√≥n JWT** - Registro y login seguro\n    \n- üé• **Gesti√≥n de Videos** - Subida, procesamiento y eliminaci√≥n\n    \n- üèÜ **Sistema de Rankings** - Clasificaci√≥n por votos\n    \n- ‚ö° **Procesamiento As√≠ncrono** - Videos procesados con Celery\n    \n- üìä **API P√∫blica** - Rankings sin autenticaci√≥n\n    \n- üõ°Ô∏è **Seguridad** - Encriptaci√≥n bcrypt y JWT\n    \n- üê≥ **Contenedorizaci√≥n** - Docker y Docker Compose\n    \n- ‚úÖ **Pruebas** - Suite completa de tests\n    \n\n### üöÄ Quick Start\n\n1. **Levantar servicios**: `docker-compose up -d`\n    \n2. **Verificar**: `curl http://localhost/`\n    \n3. **Ver docs**: `http://localhost/docs`\n    \n4. **Probar endpoints** en orden: Health Check ‚Üí Signup ‚Üí Login ‚Üí Upload Video ‚Üí Rankings\n    \n\n### üìä Endpoints Disponibles\n\n#### üîê Autenticaci√≥n\n\n- **POST /api/auth/signup** - Registro de usuarios\n    \n- **POST /api/auth/login** - Login y obtenci√≥n de JWT\n    \n\n#### üé• Gesti√≥n de Videos (Requiere Auth)\n\n- **POST /api/videos/upload** - Subir video MP4 (m√°x 100MB)\n    \n- **GET /api/videos** - Listar videos del usuario\n    \n- **GET /api/videos/{id}** - Detalles de video espec√≠fico\n    \n- **DELETE /api/videos/{id}** - Eliminar video\n    \n\n#### üèÜ Rankings P√∫blicos\n\n- **POST /api/public/videos/{video_id}/vote** - Emitir un voto (Requiere Auth)\n    \n- **GET /api/public/videos** - Listar videos publicos\n    \n- **GET /api/public/rankings** - Ranking por votos (con paginaci√≥n y filtros)\n    \n\n#### üîç Utilidades\n\n- **GET /** - Health check\n    \n\n### üìù Variables de Entorno\n\n- `base_url`: URL base de la API ([http://localhost](http://localhost))\n    \n- `access_token`: JWT token (se guarda autom√°ticamente)\n    \n- `test_email`: Email del usuario de prueba\n    \n- `test_video_id`: ID del video para pruebas\n    \n\n## üõ†Ô∏è Configuraci√≥n\n\n### Paso 1: Preparar el Entorno\n\n``` bash\n# 1. Clonar el repositorio\ngit clone <repository-url>\ncd desarrollo-sw-nube\n# 2. Crear archivo de configuraci√≥n\ncp .env.example .env\n\n ```\n\n### Paso 2: Variables de Entorno (.env)\n\n``` env\n# Base de datos\nDATABASE_URL=postgresql://postgres:postgres@postgres:5432/desarrollo_sw_nube\nPOSTGRES_DB=desarrollo_sw_nube\nPOSTGRES_USER=postgres\nPOSTGRES_PASSWORD=postgres\n# JWT Security\nSECRET_KEY=tu-clave-secreta-de-64-caracteres-aqui\nALGORITHM=HS256\nACCESS_TOKEN_EXPIRE_SECONDS=3600\n# Redis/Celery\nREDIS_URL=redis://redis:6379/0\n\n ```\n\n**Generar SECRET_KEY segura:**\n\n``` bash\nopenssl rand -hex 32\n# O\npython -c \"import secrets; print(secrets.token_hex(32))\"\n\n ```\n\n### Paso 3: Levantar Servicios\n\n``` bash\n# Iniciar todos los servicios\ndocker-compose up -d\n# Verificar estado\ndocker-compose ps\n# Ver logs\ndocker-compose logs -f\n\n ```\n\n### Paso 4: Verificar Instalaci√≥n\n\n``` bash\n# Health check\ncurl http://localhost/\n# Respuesta: \"Healthcheck\"\n# Ver documentaci√≥n interactiva\nopen http://localhost/docs\n\n ```\n\n## üìö Gu√≠a de Uso\n\n### Flujo Completo de Pruebas\n\n1. **Health Check** - Verificar que la API funciona\n    \n2. **User Signup** - Crear cuenta de usuario\n    \n3. **User Login** - Obtener token JWT (se guarda autom√°ticamente)\n    \n4. **Upload Video** - Subir video MP4\n    \n5. **List User Videos** - Ver videos subidos (guarda video_id)\n    \n6. **List Public Videos** - Ver videos en status publico\n    \n7. **Get Video Details** - Ver detalles y votos\n    \n8. **Public Rankings** - Ver ranking de jugadores\n    \n9. **Delete Video** - Eliminar video (opcional)\n    \n\n### Ejemplos de Uso\n\n#### Registro y Autenticaci√≥n\n\n``` bash\n# Registro\ncurl -X POST http://localhost/api/auth/signup \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"first_name\": \"Juan\",\n    \"last_name\": \"P√©rez\",\n    \"email\": \"juan@example.com\",\n    \"city\": \"Bogot√°\",\n    \"country\": \"Colombia\",\n    \"password1\": \"mipassword123\",\n    \"password2\": \"mipassword123\"\n  }'\n# Login\ncurl -X POST http://localhost/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"juan@example.com\",\n    \"password\": \"mipassword123\"\n  }'\n\n ```\n\n#### Gesti√≥n de Videos\n\n``` bash\n# Subir video\ncurl -X POST http://localhost/api/videos/upload \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -F \"video_file=@video.mp4\" \\\n  -F \"title=Mi video de habilidades\"\n# Listar videos\ncurl -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  http://localhost/api/videos\n# Ver ranking p√∫blico\ncurl \"http://localhost/api/public/rankings?limit=10&city=Bogot√°\"\n\n ```\n\n## üîß Caracter√≠sticas T√©cnicas\n\n### Procesamiento de Videos\n\n1. **Upload** - Usuario sube video MP4 (m√°x 100MB)\n    \n2. **Validation** - Verificaci√≥n de formato y tama√±o\n    \n3. **Queue** - Tarea encolada en Celery/Redis\n    \n4. **Processing** - Worker procesa con FFmpeg (16:9, logos)\n    \n5. **Complete** - Estado cambia a 'processed'\n    \n\n### Sistema de Rankings\n\n- **Tiempo real** - Actualizaci√≥n autom√°tica\n    \n- **Paginaci√≥n** - Soporte para grandes vol√∫menes\n    \n- **Filtros** - Por ciudad (case-insensitive)\n    \n- **Ordenamiento** - Por votos descendente\n    \n\n### Seguridad\n\n- **JWT Tokens** - Expiran en 1 hora\n    \n- **Bcrypt** - Hash seguro de contrase√±as\n    \n- **Autorizaci√≥n** - Solo propietarios acceden a sus videos\n    \n- **Validaci√≥n** - Pydantic schemas en todos los endpoints\n    \n\n## üöë Soluci√≥n de Problemas\n\n### Error 502 Bad Gateway\n\n``` bash\n# Verificar servicios\ndocker-compose ps\n# Reiniciar servicios\ndocker-compose restart\n# Ver logs\ndocker-compose logs fastapi\n\n ```\n\n### Videos no se procesan\n\n``` bash\n# Verificar Celery worker\ndocker-compose logs celery_worker\n# Verificar Redis\ndocker-compose logs redis\n# Reiniciar worker\ndocker-compose restart celery_worker\n\n ```\n\n### Base de datos\n\n``` bash\n# Limpiar y recrear\ndocker-compose down -v\ndocker-compose up -d\n# Ver logs de PostgreSQL\ndocker-compose logs postgres\n\n ```\n\n### Puerto ocupado\n\n``` bash\n# Cambiar puerto en docker-compose.yml\nports:\n  - \"8080:80\"  # Usar puerto 8080 en lugar de 80\n\n ```\n\n## üìä Monitoreo\n\n### Endpoints de Estado\n\n- **GET /** - Health check general\n    \n- **GET /docs** - Documentaci√≥n interactiva\n    \n- **GET /redoc** - Documentaci√≥n alternativa\n    \n\n### Logs Importantes\n\n``` bash\n# Ver todos los logs\ndocker-compose logs -f\n# Logs espec√≠ficos\ndocker-compose logs -f fastapi\ndocker-compose logs -f celery_worker\ndocker-compose logs -f postgres\ndocker-compose logs -f redis\n\n ```",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48212366"
	},
	"item": [
		{
			"name": "Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response is healthcheck\", function () {",
							"    pm.expect(pm.response.text()).to.include(\"Healthcheck\");",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "**Endpoint de verificaci√≥n de estado**\n\nVerifica que la API est√© funcionando correctamente.\n\n### Response\n- **200 OK**: API funcionando\n- **Otros**: Problema con el servicio\n\n### Ejemplo de uso\n```bash\ncurl http://localhost/\n```"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "\"Healthcheck\""
				}
			]
		},
		{
			"name": "User Signup",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 201) {",
							"    pm.test(\"Status code is 201\", function () {",
							"        pm.response.to.have.status(201);",
							"    });",
							"    ",
							"    pm.test(\"Response has user data\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('id');",
							"        pm.expect(jsonData).to.have.property('email');",
							"        pm.expect(jsonData).to.have.property('first_name');",
							"        pm.expect(jsonData).to.have.property('last_name');",
							"    });",
							"    ",
							"    // Store email and user_id for other tests",
							"    var jsonData = pm.response.json();",
							"    pm.environment.set('test_email', jsonData.email);",
							"    pm.environment.set('test_user_id', jsonData.id);",
							"} else {",
							"    pm.test(\"Error response has detail\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('detail');",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"first_name\": \"Test\",\n    \"last_name\": \"User\",\n    \"email\": \"test{{$timestamp}}@example.com\",\n    \"city\": \"Test City\",\n    \"country\": \"Test Country\",\n    \"password1\": \"testpass123\",\n    \"password2\": \"testpass123\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/auth/signup",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"auth",
						"signup"
					]
				},
				"description": "**Registro de nuevos usuarios**\n\nCrea una nueva cuenta de usuario en el sistema.\n\n### Campos requeridos\n- `first_name`: Nombre (1-100 caracteres)\n- `last_name`: Apellido (1-100 caracteres)\n- `email`: Email v√°lido (√∫nico)\n- `password1`: Contrase√±a (m√≠nimo 8 caracteres)\n- `password2`: Confirmaci√≥n de contrase√±a\n\n### Campos opcionales\n- `city`: Ciudad\n- `country`: Pa√≠s\n\n### Respuestas\n- **201 Created**: Usuario creado exitosamente\n- **400 Bad Request**: Datos inv√°lidos o email duplicado\n\n### Validaciones\n- Las contrase√±as deben coincidir\n- El email debe ser √∫nico\n- Todos los campos requeridos deben estar presentes"
			},
			"response": [
				{
					"name": "Success - User Created",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"Ana\",\n    \"last_name\": \"Garc√≠a\",\n    \"email\": \"ana@example.com\",\n    \"city\": \"Bogot√°\",\n    \"country\": \"Colombia\",\n    \"password1\": \"mipassword123\",\n    \"password2\": \"mipassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/signup",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"id\": 1,\n  \"first_name\": \"Ana\",\n  \"last_name\": \"Garc√≠a\",\n  \"email\": \"ana@example.com\",\n  \"city\": \"Bogot√°\",\n  \"country\": \"Colombia\"\n}"
				},
				{
					"name": "Error - Password Mismatch",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"Test\",\n    \"last_name\": \"User\",\n    \"email\": \"test@example.com\",\n    \"password1\": \"testpass123\",\n    \"password2\": \"different123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/signup",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Las contrase√±as no coinciden.\"\n}"
				},
				{
					"name": "Error - Duplicate Email",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"Another\",\n    \"last_name\": \"User\",\n    \"email\": \"ana@example.com\",\n    \"password1\": \"testpass123\",\n    \"password2\": \"testpass123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/signup",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"signup"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Email ya est√° registrado.\"\n}"
				}
			]
		},
		{
			"name": "User Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    pm.test(\"Status code is 200\", function () {",
							"        pm.response.to.have.status(200);",
							"    });",
							"    ",
							"    pm.test(\"Response has token data\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('access_token');",
							"        pm.expect(jsonData).to.have.property('token_type');",
							"        pm.expect(jsonData.token_type).to.eql('bearer');",
							"    });",
							"    ",
							"    // Store token and expiry for future requests",
							"    var jsonData = pm.response.json();",
							"    pm.environment.set('access_token', jsonData.access_token);",
							"    pm.environment.set('token_expires_in', jsonData.expires_in);",
							"} else {",
							"    pm.test(\"Error response has detail\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('detail');",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"testpass123\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/auth/login",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"auth",
						"login"
					]
				},
				"description": "**Autenticaci√≥n de usuarios**\n\nPermite a los usuarios autenticarse y obtener un token JWT.\n\n### Campos requeridos\n- `email`: Email del usuario registrado\n- `password`: Contrase√±a del usuario\n\n### Respuestas\n- **200 OK**: Login exitoso, retorna JWT token\n- **401 Unauthorized**: Credenciales inv√°lidas\n\n### Token JWT\nEl token retornado debe incluirse en requests autenticados:\n```\nAuthorization: Bearer <access_token>\n```\n\n### Duraci√≥n del token\nPor defecto: 1 hora (3600 segundos)"
			},
			"response": [
				{
					"name": "Success - Login OK",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"ana@example.com\",\n    \"password\": \"mipassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBbmEiLCJleHAiOjE3MzQ1NzEyMDB9.example_jwt_token_here\",\n  \"token_type\": \"bearer\"\n}"
				},
				{
					"name": "Error - Invalid Credentials",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"noexiste@example.com\",\n    \"password\": \"cualquiera\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Credenciales inv√°lidas.\"\n}"
				},
				{
					"name": "Error - Wrong Password",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"ana@example.com\",\n    \"password\": \"wrongpassword\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Credenciales inv√°lidas.\"\n}"
				}
			]
		},
		{
			"name": "Upload Video",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 201) {",
							"    pm.test(\"Status code is 201\", function () {",
							"        pm.response.to.have.status(201);",
							"    });",
							"    ",
							"    pm.test(\"Response has upload data\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('message');",
							"        pm.expect(jsonData).to.have.property('task_id');",
							"        pm.expect(jsonData.message).to.include('Video subido exitosamente');",
							"    });",
							"} else if (pm.response.code === 401) {",
							"    pm.test(\"Unauthorized - Missing token\", function () {",
							"        pm.response.to.have.status(401);",
							"    });",
							"} else {",
							"    pm.test(\"Error response has detail\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('detail');",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"description": "JWT token obtenido del login"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "video_file",
							"description": "Archivo de video en formato MP4, m√°ximo 100MB",
							"type": "file",
							"src": []
						},
						{
							"key": "title",
							"value": "Mi video de habilidades",
							"description": "T√≠tulo descriptivo del video",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{base_url}}/api/videos/upload",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"videos",
						"upload"
					]
				},
				"description": "**Subir video de habilidades**\n\nPermite a un jugador autenticado subir un video que ser√° procesado autom√°ticamente.\n\n### Autenticaci√≥n requerida\n- Header: `Authorization: Bearer <access_token>`\n\n### Campos requeridos (form-data)\n- `video_file`: Archivo de video en formato MP4, m√°ximo 100MB\n- `title`: T√≠tulo descriptivo del video\n\n### Respuestas\n- **201 Created**: Video subido exitosamente, procesamiento iniciado\n- **400 Bad Request**: Archivo inv√°lido (formato, tama√±o)\n- **401 Unauthorized**: Token faltante o inv√°lido\n- **422 Unprocessable Entity**: Campos faltantes\n\n### Proceso\n1. **Upload**: El video se guarda con estado 'uploaded'\n2. **Queue**: Se encola tarea de procesamiento en Celery\n3. **Processing**: FFmpeg procesa el video en segundo plano\n4. **Complete**: Estado cambia a 'processed'\n\n### Validaciones\n- Formato: Solo MP4\n- Tama√±o: M√°ximo 100MB\n- Autenticaci√≥n: JWT v√°lido requerido"
			},
			"response": [
				{
					"name": "Success - Video Uploaded",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "video_file",
									"type": "file",
									"src": []
								},
								{
									"key": "title",
									"value": "Mi video de habilidades",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"message\": \"Video subido exitosamente. Tarea creada.\",\n  \"task_id\": \"abc123-def456-ghi789\"\n}"
				},
				{
					"name": "Error - Unauthorized",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "video_file",
									"type": "file",
									"src": []
								},
								{
									"key": "title",
									"value": "Test Video",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Not authenticated\"\n}"
				},
				{
					"name": "Error - Invalid File Format",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "video_file",
									"type": "file",
									"src": []
								},
								{
									"key": "title",
									"value": "Invalid Video",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Error en el archivo (tipo o tama√±o no valido): video/avi\"\n}"
				},
				{
					"name": "Error - Missing File",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "title",
									"value": "Test Video",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"status": "Unprocessable Entity",
					"code": 422,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Field required\"\n}"
				}
			]
		},
		{
			"name": "List User Videos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    pm.test(\"Status code is 200\", function () {",
							"        pm.response.to.have.status(200);",
							"    });",
							"    ",
							"    pm.test(\"Response is an array\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.be.an('array');",
							"    });",
							"    ",
							"    if (pm.response.json().length > 0) {",
							"        pm.test(\"Video items have required fields\", function () {",
							"            var jsonData = pm.response.json();",
							"            var firstVideo = jsonData[0];",
							"            pm.expect(firstVideo).to.have.property('video_id');",
							"            pm.expect(firstVideo).to.have.property('title');",
							"            pm.expect(firstVideo).to.have.property('status');",
							"            pm.expect(firstVideo).to.have.property('uploaded_at');",
							"        });",
							"        ",
							"        // Store first video ID for other tests",
							"        var firstVideo = pm.response.json()[0];",
							"        pm.environment.set('test_video_id', firstVideo.video_id);",
							"    }",
							"} else {",
							"    pm.test(\"Unauthorized - Missing or invalid token\", function () {",
							"        pm.response.to.have.status(401);",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"description": "JWT token obtenido del login"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/videos",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"videos"
					]
				},
				"description": "**Listar videos del usuario**\n\nObtiene todos los videos subidos por el usuario autenticado, ordenados por fecha de subida (m√°s reciente primero).\n\n### Autenticaci√≥n requerida\n\n- Header: `Authorization: Bearer`\n    \n\n### Respuestas\n\n- **200 OK**: Lista de videos obtenida (puede ser array vac√≠o)\n    \n- **401 Unauthorized**: Token faltante o inv√°lido\n    \n\n### Informaci√≥n mostrada\n\n- ID del video\n    \n- T√≠tulo\n    \n- Estado (uploaded, processed, public)\n    \n- Fecha de subida\n    \n- Fecha de procesamiento (si aplica)\n    \n- URL del video procesado (si aplica)\n    \n\n### Notas\n\n- Solo muestra videos del usuario autenticado\n    \n- Ordenados por fecha descendente\n    \n- Incluye videos en todos los estados"
			},
			"response": [
				{
					"name": "Success - Videos List",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "[\n  {\n    \"video_id\": 1,\n    \"title\": \"Mi video de habilidades\",\n    \"status\": \"processed\",\n    \"uploaded_at\": \"2024-01-15T10:30:00Z\",\n    \"processed_at\": \"2024-01-15T10:35:00Z\",\n    \"processed_url\": \"processed/processed_video_123.mp4\"\n  },\n  {\n    \"video_id\": 2,\n    \"title\": \"Otro video\",\n    \"status\": \"uploaded\",\n    \"uploaded_at\": \"2024-01-14T15:20:00Z\",\n    \"processed_at\": null,\n    \"processed_url\": null\n  }\n]"
				},
				{
					"name": "Success - Empty List",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "[]"
				},
				{
					"name": "Error - Unauthorized",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/videos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Not authenticated\"\n}"
				}
			]
		},
		{
			"name": "Get Video Details",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    pm.test(\"Status code is 200\", function () {",
							"        pm.response.to.have.status(200);",
							"    });",
							"    ",
							"    pm.test(\"Response has video details\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('video_id');",
							"        pm.expect(jsonData).to.have.property('title');",
							"        pm.expect(jsonData).to.have.property('status');",
							"        pm.expect(jsonData).to.have.property('votes');",
							"        pm.expect(jsonData).to.have.property('uploaded_at');",
							"    });",
							"    ",
							"    pm.test(\"Votes is a number\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.votes).to.be.a('number');",
							"    });",
							"} else if (pm.response.code === 404) {",
							"    pm.test(\"Video not found\", function () {",
							"        pm.response.to.have.status(404);",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.detail).to.include('not found');",
							"    });",
							"} else if (pm.response.code === 403) {",
							"    pm.test(\"Forbidden - Not video owner\", function () {",
							"        pm.response.to.have.status(403);",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.detail).to.include('not authorized');",
							"    });",
							"} else if (pm.response.code === 401) {",
							"    pm.test(\"Unauthorized - Missing token\", function () {",
							"        pm.response.to.have.status(401);",
							"    });",
							"} else if (pm.response.code === 422) {",
							"    pm.test(\"Unauthorized - Missing token\", function () {",
							"        pm.response.to.have.status(422);",
							"    });",
							"} else {",
							"    pm.test(\"Unexpected response code\", function () {",
							"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"description": "JWT token obtenido del login"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/videos/{{test_video_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"videos",
						"{{test_video_id}}"
					]
				},
				"description": "**Obtener detalles de un video**\n\nObtiene informaci√≥n detallada de un video espec√≠fico, incluyendo el n√∫mero de votos recibidos.\n\n### Autenticaci√≥n requerida\n- Header: `Authorization: Bearer <access_token>`\n\n### Par√°metros\n- `video_id`: ID del video (en la URL)\n\n### Respuestas\n- **200 OK**: Detalles del video obtenidos\n- **401 Unauthorized**: Token faltante o inv√°lido\n- **403 Forbidden**: El video no pertenece al usuario autenticado\n- **404 Not Found**: Video no existe\n\n### Informaci√≥n incluida\n- ID del video\n- T√≠tulo\n- Estado (uploaded, processed, public)\n- Fechas de subida y procesamiento\n- URLs de archivos\n- **N√∫mero de votos recibidos**\n\n### Autorizaci√≥n\n- Solo el propietario del video puede ver sus detalles\n- Otros usuarios recibir√°n error 403"
			},
			"response": [
				{
					"name": "Success - Video Details",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"1"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"video_id\": 1,\n  \"title\": \"Mi video de habilidades\",\n  \"status\": \"processed\",\n  \"uploaded_at\": \"2024-01-15T10:30:00Z\",\n  \"processed_at\": \"2024-01-15T10:35:00Z\",\n  \"original_url\": \"uploads/user_1_1705312200.mp4\",\n  \"processed_url\": \"processed/processed_user_1_1705312200.mp4\",\n  \"votes\": 15\n}"
				},
				{
					"name": "Error - Video Not Found",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"999"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Video not found\"\n}"
				},
				{
					"name": "Error - Forbidden Access",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"1"
							]
						}
					},
					"status": "Forbidden",
					"code": 403,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"You are not authorized\"\n}"
				}
			]
		},
		{
			"name": "Delete Video",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    pm.test(\"Status code is 200\", function () {",
							"        pm.response.to.have.status(200);",
							"    });",
							"    ",
							"    pm.test(\"Response has success message\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('message');",
							"        pm.expect(jsonData).to.have.property('video_id');",
							"        pm.expect(jsonData.message).to.include('eliminado exitosamente');",
							"    });",
							"} else if (pm.response.code === 400) {",
							"    pm.test(\"Bad Request - Video is public\", function () {",
							"        pm.response.to.have.status(400);",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.detail).to.include('public');",
							"    });",
							"} else if (pm.response.code === 404) {",
							"    pm.test(\"Video not found\", function () {",
							"        pm.response.to.have.status(404);",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.detail).to.include('not found');",
							"    });",
							"} else if (pm.response.code === 403) {",
							"    pm.test(\"Forbidden - Not video owner\", function () {",
							"        pm.response.to.have.status(403);",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData.detail).to.include('not authorized');",
							"    });",
							"} else if (pm.response.code === 401) {",
							"    pm.test(\"Unauthorized - Missing token\", function () {",
							"        pm.response.to.have.status(401);",
							"    });",
							"} else if (pm.response.code === 422) {",
							"    pm.test(\"Unauthorized - Missing token\", function () {",
							"        pm.response.to.have.status(422);",
							"    });",
							"} else {",
							"    pm.test(\"Unexpected response code\", function () {",
							"        pm.expect.fail(\"Unexpected status code: \" + pm.response.code);",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"description": "JWT token obtenido del login"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/videos/{{test_video_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"videos",
						"{{test_video_id}}"
					]
				},
				"description": "**Eliminar un video**\n\nElimina permanentemente un video del usuario autenticado.\n\n### Autenticaci√≥n requerida\n- Header: `Authorization: Bearer <access_token>`\n\n### Par√°metros\n- `video_id`: ID del video a eliminar (en la URL)\n\n### Respuestas\n- **200 OK**: Video eliminado exitosamente\n- **400 Bad Request**: No se puede eliminar (video es p√∫blico)\n- **401 Unauthorized**: Token faltante o inv√°lido\n- **403 Forbidden**: El video no pertenece al usuario autenticado\n- **404 Not Found**: Video no existe\n\n### Restricciones\n- ‚ùå **Videos p√∫blicos**: No se pueden eliminar\n- ‚úÖ **Videos uploaded/processed**: Se pueden eliminar\n- üîí **Solo el propietario**: Puede eliminar sus videos\n\n### Notas importantes\n- **Eliminaci√≥n permanente**: No se puede deshacer\n- **Archivos**: Se eliminan de la base de datos (archivos f√≠sicos permanecen)\n- **Votos**: Se eliminan autom√°ticamente por cascada"
			},
			"response": [
				{
					"name": "Success - Video Deleted",
					"originalRequest": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"1"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"message\": \"El video ha sido eliminado exitosamente.\",\n  \"video_id\": 1\n}"
				},
				{
					"name": "Error - Video Not Found",
					"originalRequest": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/999",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"999"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Video not found\"\n}"
				},
				{
					"name": "Error - Video is Public",
					"originalRequest": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"1"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Video is public\"\n}"
				},
				{
					"name": "Error - Forbidden Access",
					"originalRequest": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"url": {
							"raw": "{{base_url}}/api/videos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"1"
							]
						}
					},
					"status": "Forbidden",
					"code": 403,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"You are not authorized\"\n}"
				}
			]
		},
		{
			"name": "List Public Videos",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {\r",
							"    pm.test(\"Status code is 200\", function () {\r",
							"        pm.response.to.have.status(200);\r",
							"    });\r",
							"    \r",
							"    pm.test(\"Response is an array\", function () {\r",
							"        var jsonData = pm.response.json();\r",
							"        pm.expect(jsonData).to.be.an('array');\r",
							"    });\r",
							"    \r",
							"    if (pm.response.json().length > 0) {\r",
							"        pm.test(\"Video items have required fields\", function () {\r",
							"            var jsonData = pm.response.json();\r",
							"            var firstVideo = jsonData[0];\r",
							"            pm.expect(firstVideo).to.have.property('id');\r",
							"            pm.expect(firstVideo).to.have.property('title');\r",
							"            pm.expect(firstVideo).to.have.property('uploaded_at');\r",
							"            pm.expect(firstVideo).to.have.property('owner_name');\r",
							"            pm.expect(firstVideo).to.have.property('owner_city');\r",
							"        });\r",
							"        \r",
							"        // Store first video ID for other tests\r",
							"        var firstVideo = pm.response.json()[0];\r",
							"        pm.environment.set('test_video_id', firstVideo.video_id);\r",
							"    }\r",
							"} else {\r",
							"    pm.test(\"Unexpected Error - Internal Server Error\", function () {\r",
							"        pm.response.to.have.status(500);\r",
							"    });\r",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/public/videos/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"public",
						"videos",
						""
					]
				},
				"description": "**Listar videos p√∫blicos**\n\nObtiene todos los videos subidos con estado _p√∫blico_ ordenados por fecha de subida (m√°s reciente primero).\n\n### Respuestas\n\n- **200 OK**: Lista de videos obtenida (puede ser array vac√≠o)\n    \n\n### Informaci√≥n mostrada\n\n- ID del video\n    \n- T√≠tulo\n    \n- Fecha de subida\n    \n- Fecha de procesamiento\n    \n- URL del video procesado\n    \n- Nombre del propietario del video\n    \n- Ciudad de procedencia del propietario del video\n    \n\n### Caracter√≠sticas\n\n- ‚úÖ **P√∫blico**: No requiere autenticaci√≥n\n    \n- üìà **Ordenado**: Por votos descendente\n    \n\n### Estructura de respuesta\n\n``` json\n[\n  {\n    \"id: 1,\n    \"title\": \"Superstar Jump\",\n    \"uploaded_at\": 2025-10-11T00:45:12.345678Z,\n    \"processed_url\": \"https://cdn.example.com/videos/superstar_jump.mp4\",\n    \"owner_name\": \"Juan P√©rez\",\n    \"owner_city\": \"Bogot√°\"\n  },\n  {\n    \"id\": 2,\n    \"title\": \"Behind-the-Back Crossover Demo\",\n    \"uploaded_at\": \"2025-10-15T19:42:56.238410Z\",\n    \"processed_url\": \"https://cdn.example.com/videos/behind_the_back_crossover.mp4\",\n    \"owner_name\": \"Carlos Rodr√≠guez\",\n    \"owner_city\": \"Cali\"\n  }\n]\n\n ```"
			},
			"response": [
				{
					"name": "Success - Videos List",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/public/videos/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"videos",
								""
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": null,
					"header": null,
					"cookie": [],
					"body": "[\r\n  {\r\n    \"id: 1,\r\n    \"title\": \"Superstar Jump\",\r\n    \"uploaded_at\": 2025-10-11T00:45:12.345678Z,\r\n    \"processed_url\": \"https://cdn.example.com/videos/superstar_jump.mp4\",\r\n    \"owner_name\": \"Juan P√©rez\",\r\n    \"owner_city\": \"Bogot√°\"\r\n  },\r\n  {\r\n    \"id\": 2,\r\n    \"title\": \"Behind-the-Back Crossover Demo\",\r\n    \"uploaded_at\": \"2025-10-15T19:42:56.238410Z\",\r\n    \"processed_url\": \"https://cdn.example.com/videos/behind_the_back_crossover.mp4\",\r\n    \"owner_name\": \"Carlos Rodr√≠guez\",\r\n    \"owner_city\": \"Cali\"\r\n  }\r\n]\r\n"
				}
			]
		},
		{
			"name": "Emit Vote",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    pm.test(\"Status code is 200\", function () {",
							"        pm.response.to.have.status(200);",
							"    });",
							"    ",
							"    pm.test(\"Response has success message\", function () {",
							"        var jsonData = pm.response.json();",
							"        pm.expect(jsonData).to.have.property('message');",
							"        pm.expect(jsonData.message).to.include('Vote successfully registered');",
							"    });",
							"} else if (pm.response.code === 404) {",
							"    pm.test(\"Video not found - Status code is 404\", function () {",
							"        pm.response.to.have.status(404);",
							"    });",
							"",
							"    pm.test(\"Response has the detail message\", function(){",
							"        var jsonData = pm.response.json()",
							"        pm.expect(jsonData).to.have.property('detail');",
							"        pm.expect(jsonData.detail).to.include('Video not found');",
							"    });",
							"} else if (pm.response.code === 400){",
							"    pm.test(\"Already voted - Status code is 400 \", function () {",
							"        pm.response.to.have.status(400)",
							"    });",
							"",
							"    pm.test(\"Response has the detail message\", function(){",
							"        var jsonData = pm.response.json()",
							"        pm.expect(jsonData).to.have.property('detail');",
							"        pm.expect(jsonData.detail).to.include('You have already voted for this video');",
							"    });",
							"} else if (pm.response.code === 401){",
							"    pm.test(\"Unauthorized - Status code is 401\", function () {",
							"        pm.response.to.have.status(401)",
							"    });",
							"",
							"    pm.test(\"Response has the detail message\", function(){",
							"        var jsonData = pm.response.json()",
							"        pm.expect(jsonData).to.have.property('detail');",
							"    });",
							"}else if (pm.response.code === 403) {",
							"    pm.test(\"Forbidden - Status code is 403\", function () {",
							"        pm.response.to.have.status(403)",
							"    });",
							"",
							"    pm.test(\"Response has the detail message\", function(){",
							"        var jsonData = pm.response.json()",
							"        pm.expect(jsonData).to.have.property('detail');",
							"    });",
							"}"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}",
						"description": "JWT token obtenido del login"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": []
				},
				"url": {
					"raw": "{{base_url}}/api/public/videos/{{test_video_id}}/vote",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"public",
						"videos",
						"{{test_video_id}}",
						"vote"
					]
				},
				"description": "**Emitir un voto**\n\nPermite a un usuario autenticado emitir un voto para un video en espec√≠fico.\n\n### Autenticaci√≥n requerida\n\n- Header: `Authorization: Bearer`\n    \n\n### Par√°metros\n\n- `video_id`: ID del video al que se emite el voto (en la URL)\n    \n\n### Respuestas\n\n- **200**: Voto emitido exitosamente\n    \n- **400**: Voto invalido, el usuario ya emiti√≥ un voto por ese video\n    \n- **404**: Video no encontrado\n    \n- **401**: Token inv√°lido\n    \n- **403**: Token faltante"
			},
			"response": [
				{
					"name": "Success - Video Uploaded",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{base_url}}/api/public/videos/{{test_video_id}}/vote",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"videos",
								"{{test_video_id}}",
								"vote"
							]
						}
					},
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"message\": \"Vote successfully registered\"\n}"
				},
				{
					"name": "Error - Unauthorized",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Not authenticated\"\n}"
				},
				{
					"name": "Error - Invalid duplicate vote",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"You have already voted for this video\"\n}"
				},
				{
					"name": "Error - Missing video",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{base_url}}/api/videos/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"videos",
								"upload"
							]
						}
					},
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": \"Video not found\"\n}"
				}
			]
		},
		{
			"name": "Public Rankings",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response is an array\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.be.an('array');",
							"});",
							"",
							"if (pm.response.json().length > 0) {",
							"    pm.test(\"Ranking items have required fields\", function () {",
							"        var jsonData = pm.response.json();",
							"        var firstItem = jsonData[0];",
							"        pm.expect(firstItem).to.have.property('position');",
							"        pm.expect(firstItem).to.have.property('username');",
							"        pm.expect(firstItem).to.have.property('city');",
							"        pm.expect(firstItem).to.have.property('votes');",
							"        pm.expect(firstItem.position).to.be.a('number');",
							"        pm.expect(firstItem.username).to.be.a('string');",
							"        pm.expect(firstItem.city).to.be.a('string');",
							"        pm.expect(firstItem.votes).to.be.a('number');",
							"    });",
							"    ",
							"    pm.test(\"Rankings are ordered by votes (descending)\", function () {",
							"        var jsonData = pm.response.json();",
							"        for (let i = 0; i < jsonData.length - 1; i++) {",
							"            pm.expect(jsonData[i].votes).to.be.at.least(jsonData[i + 1].votes);",
							"        }",
							"    });",
							"    ",
							"    pm.test(\"Positions are sequential\", function () {",
							"        var jsonData = pm.response.json();",
							"        for (let i = 0; i < jsonData.length; i++) {",
							"            pm.expect(jsonData[i].position).to.eql(i + 1);",
							"        }",
							"    });",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/public/rankings?page=1&limit=10",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"public",
						"rankings"
					],
					"query": [
						{
							"key": "page",
							"value": "1",
							"description": "N√∫mero de p√°gina (por defecto 1)"
						},
						{
							"key": "limit",
							"value": "10",
							"description": "Elementos por p√°gina (1-100, por defecto 10)"
						},
						{
							"key": "city",
							"value": "",
							"description": "Filtrar por ciudad (opcional)",
							"disabled": true
						}
					]
				},
				"description": "**Ranking p√∫blico de jugadores por votos**\n\nMuestra el ranking actual de los jugadores ordenados por n√∫mero de votos acumulados.\n\n### Par√°metros de consulta\n\n- `page`: N√∫mero de p√°gina (por defecto 1, m√≠nimo 1)\n    \n- `limit`: Elementos por p√°gina (1-100, por defecto 10)\n    \n- `city`: Filtrar por ciudad (opcional, b√∫squeda insensible a may√∫sculas)\n    \n\n### Respuestas\n\n- **200 OK**: Lista de rankings obtenida\n    \n- **400 Bad Request**: Par√°metro inv√°lido en la consulta\n    \n- **422 Unprocessable Entity**: Validaci√≥n de par√°metros fallida\n    \n\n### Caracter√≠sticas\n\n- ‚úÖ **P√∫blico**: No requiere autenticaci√≥n\n    \n- üìà **Ordenado**: Por votos descendente\n    \n- üìã **Paginado**: Soporte para grandes vol√∫menes\n    \n- üè¢ **Filtrable**: Por ciudad\n    \n- ‚ö° **Optimizado**: Para consultas r√°pidas\n    \n\n### Ejemplos de uso\n\n``` bash\n# Ranking completo (primera p√°gina)\ncurl \"{{base_url}}/api/public/rankings\"\n# Segunda p√°gina con 5 elementos\ncurl \"{{base_url}}/api/public/rankings?page=2&limit=5\"\n# Filtrar por ciudad\ncurl \"{{base_url}}/api/public/rankings?city=Bogot√°\"\n\n ```\n\n### Estructura de respuesta\n\n``` json\n[\n  {\n    \"position\": 1,\n    \"username\": \"Juan P√©rez\",\n    \"city\": \"Bogot√°\",\n    \"votes\": 1530\n  },\n  {\n    \"position\": 2,\n    \"username\": \"Ana Garc√≠a\",\n    \"city\": \"Medell√≠n\",\n    \"votes\": 1495\n  }\n]\n\n ```"
			},
			"response": [
				{
					"name": "Success - Rankings with Data",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/public/rankings?page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"rankings"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "[\n  {\n    \"position\": 1,\n    \"username\": \"Juan P√©rez\",\n    \"city\": \"Bogot√°\",\n    \"votes\": 1530\n  },\n  {\n    \"position\": 2,\n    \"username\": \"Ana Garc√≠a\",\n    \"city\": \"Medell√≠n\",\n    \"votes\": 1495\n  },\n  {\n    \"position\": 3,\n    \"username\": \"Carlos L√≥pez\",\n    \"city\": \"Cali\",\n    \"votes\": 1200\n  }\n]"
				},
				{
					"name": "Success - Empty Rankings",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/public/rankings",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"rankings"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "[]"
				},
				{
					"name": "Success - City Filter",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/public/rankings?city=Bogot√°",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"rankings"
							],
							"query": [
								{
									"key": "city",
									"value": "Bogot√°"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "[\n  {\n    \"position\": 1,\n    \"username\": \"Juan P√©rez\",\n    \"city\": \"Bogot√°\",\n    \"votes\": 1530\n  }\n]"
				},
				{
					"name": "Error - Invalid Parameters",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/public/rankings?page=0&limit=101",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"public",
								"rankings"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "limit",
									"value": "101"
								}
							]
						}
					},
					"status": "Unprocessable Entity",
					"code": 422,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"detail\": [\n    {\n      \"loc\": [\"query\", \"page\"],\n      \"msg\": \"ensure this value is greater than or equal to 1\",\n      \"type\": \"value_error.number.not_ge\",\n      \"ctx\": {\"limit_value\": 1}\n    }\n  ]\n}"
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "{{base_url}}"
		}
	]
}